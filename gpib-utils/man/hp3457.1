.\" This file is part of gpib-utils.
.\" For details, see http://sourceforge.net/projects/gpib-utils.
.\"
.\" Copyright (C) 2005 Jim Garlick <garlick@speakeasy.net>
.\"
.\" gpib-utils is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.\" gpib-utils is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with gpib-utils; if not, write to the Free Software Foundation, 
.\" Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
.TH hp3457 1  2005-04-05 "" "gpib-utils"
.SH NAME
hp3457 \- control HP 3457A digital multimeter 
.SH SYNOPSIS
.B hp3457 [\fIOPTIONS\fR]
.SH DESCRIPTION
\fBhp3457\fR controls the HP 3457A digital multimeter via its GPIB interface.
The instrument is presumed to be attached to GPIB adapter 0 and configured 
with an entry in /etc/gpib.conf (see CONFIGURATION below).
.PP
\fBhp3457\fR performs actions selected on the command line in a fixed sequence:
.IP
.nf
clear
autocal
selftest
select function
select range
select trigger mode
select display digits
read measurements
local
.fi
.PP
If an action is not selected on the command line, it is not performed.
.SH OPTIONS
\fBhp3457\fR accepts the following command line options:
.TP
\fB\-n\fR, \fB\-\-name\fR name
Override the name used to look up the device in /etc/gpib.conf.
Default: \fIhp3457\fR.
.TP
\fB\-c\fR, \fB\-\-clear\fR
Clear the instrument, verify its model number, and load defaults 
appropriate for remote operation including: 
dcv, auto range, synchronous trigger and 5 digits.
.TP
\fB\-l\fR, \fB\-\-local\fR
Enable front panel, and load defaults 
appropriate for manual operation, essentially the same as \fB--clear\fR
except trigger mode is set to auto.
.TP
\fB\-a\fR, \fB\-\-autocal\fR 
Perform AC flatness/offset and extended ohms precharge 
autocal procedures (with input signals disconnected) to
improve the short term accuracy of certain measurements.
Autocal should always be performed before taking measurements
in the 3 Gohm range.
Autocal constants are stored in NVRAM and persist across
\fB--clear\fR and \fB--local\fR operations or an instrument power cycle.
The two autocal procedures combined take about 35 seconds.
.TP
\fB\-S\fR, \fB\-\-selftest\fR 
Run the instrument self test and report any errors discovered.
The self test procedure takes about 7 seconds.
.TP
\fB\-f\fR, \fB\-\-function\fR function
Set the function to: 
\fIdcv\fR (DC volts), \fIacv\fR (AC volts), \fIacdcv\fR (AC + DC volts),
\fIdci\fR (DC current), \fIaci\fR (AC current), \fIacdci\fR (AC + DC current),
\fIohm2\fR (2-wire ohms), \fIohm4\fR (4-wire ohms), 
\fIfreq\fR (frequency), \fIperiod\fR (period),
.TP
\fB\-r\fR, \fB\-\-range\fR maxval
Set the range to the maximum expected reading.
A maxval of ``auto'' selects autoranging.
.TP
\fB\-t\fR, \fB\-\-trigger\fR mode
Set the trigger mode to:
\fIauto\fR (trigger when not busy), 
\fIext\fR (trigger on negative edge transition of TTL pulse on rear-panel bnc),
\fIsgl\fR (trigger once upon receipt of TRIG SGL then HOLD), 
\fIhold\fR (stop triggering), or
\fIsyn\fR (trigger when controller requests data and buffer empty).
.TP
\fB\-d\fR, \fB\-\-digits\fR 
Set the number of display digits to \fI3\fR, \fI4\fR, \fI5\fR, or \fI6\fR.
For \fIfreq\fR, \fIperiod\fR, or \fIohms2\fR or \fIohms4\fR in the 3 Gohm
range, the number of digits displayed will be the specified number plus one.  
For all other measurements, the number of digits will be the specified number 
plus one half.
.TP
\fB\-s\fR, \fB\-\-samples\fR 
Specify the number of measurements to take.
Measurements are displayed on stdout in the form received from the instrument.
If more than one measurement is requested, a time in seconds since the
first measurement was initiated is displayed in column one and the measurement
is in column two, with a tab separating the columns.
Default: \fI0\fR (no measurement).
.TP
\fB\-T\fR, \fB\-\-period\fR 
Sleep the specified number of seconds between measurements.
The actual measurement period will be the sleep time plus the trigger wait
time plus the measurement integration time.
In synchronous trigger mode, the GPIB read immediately triggers a 
measurement and integration varies from about 
0.2ms (3.5 digit \fIdcv\fR, 0.3-300V range) 
to 1.2s (6.5 digit \fIohm\fR, 3 Gohm range).
Default: \fI0\fR (no sleep).
.SH "EXAMPLES"
Take 10 samples 500ms apart:
.IP
hp3457 -c -l -f dcv -T 500ms -s 10 >sample.dat
.PP
The following gnuplot commands will plot volts vs. time:
.IP
.nf
set xlabel "time (s)"
set ylabel "dc volts (v)"
set xrange[0:]
set yrange[-50:50]
set title "HP 3457A Voltmeter Test"
plot 'sample.dat' title "Sample Plot" with linesp;
.fi
.SH "CONFIGURATION"
The /etc/gpib.conf entry for this instrument included the following
parameters:
.IP
.nf
eos = 0xa
set-reos = yes
set-bin = no
set-xeos = no
set-eot = yes
timeout = T30s
.fi
.SH "SEE ALSO"
"HP 3457A Multimeter Operating Manual", May 1986.
.PP
"HP 3457A Multimeter Service Manual", Edition 3, Feb. 1988.
.PP
gnuplot(1)
